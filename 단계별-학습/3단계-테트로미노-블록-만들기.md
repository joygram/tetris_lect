---
layout: default
title: 3단계 - 테트로미노 블록 만들기
---

# 3단계: 테트로미노 블록 만들기

## 🎯 이 단계에서 배울 것

- Unity에서 프리팹 만들기
- 7가지 테트로미노 프리팹 제작
- Tetromino 클래스 기본 구조
- 자식 오브젝트 사용하기

## 📝 실습 내용

### 1. Unity에서 테트로미노 프리팹 만들기

**참고 블로그 방식**: 각 테트로미노를 Unity 에디터에서 직접 프리팹으로 만듭니다.  
코드에서 Dictionary나 List 같은 복잡한 자료구조를 사용하지 않고, Unity의 시각적 편집 기능을 활용합니다.

#### 1-1. Prefabs 폴더 만들기

1. **Project 창에서 Assets 폴더 선택**
   - 화면 아래 Project 창에서 **"Assets"** 폴더 클릭

2. **폴더 생성**
   - **우클릭** → **"Create"** → **"Folder"** 선택
   - 또는 **Assets** 폴더 선택 상태에서 **우클릭** → **"Create > Folder"**

3. **이름 변경**
   - 생성된 "New Folder"를 **"Prefabs"**로 변경
   - 방법: 클릭 후 잠시 기다린 후 다시 클릭하거나 **F2** 키

#### 1-2. I 모양 프리팹 만들기

**1단계: 빈 GameObject 생성**

1. **Hierarchy 창 확인**
   - 화면 왼쪽 하단의 **"Hierarchy"** 창 확인

2. **빈 GameObject 생성**
   - Hierarchy 창의 빈 공간에서 **우클릭**
   - **"Create Empty"** 선택
   - 또는 메뉴: **GameObject > Create Empty**

3. **이름 변경**
   - 생성된 "GameObject"를 **"I_Tetromino"**로 변경
   - 방법:
     - Hierarchy에서 클릭 후 잠시 기다린 후 다시 클릭
     - 또는 **F2** 키
     - 또는 Inspector 창 상단의 이름 필드에서 직접 입력

**2단계: 첫 번째 큐브 추가 (Block_0)**

1. **I_Tetromino 선택**
   - Hierarchy에서 **"I_Tetromino"** 클릭 (파란색으로 선택됨)

2. **자식 큐브 생성**
   - **I_Tetromino가 선택된 상태**에서 Hierarchy 창에서 **우클릭**
   - **"3D Object"** → **"Cube"** 선택
   - 또는 메뉴: **GameObject > 3D Object > Cube**
   - **중요**: I_Tetromino가 선택된 상태에서 생성해야 자식으로 생성됨!

3. **이름 변경**
   - 생성된 "Cube"를 **"Block_0"**로 변경
   - Hierarchy에서 I_Tetromino 아래에 Block_0이 들여쓰기되어 보이면 자식으로 생성된 것

4. **Local Position 설정**
   - Hierarchy에서 **"Block_0"** 클릭
   - Inspector 창(오른쪽) 확인
   - **"Transform"** 컴포넌트에서:
     - **Position**의 X: **0**, Y: **0**, Z: **0** 입력
     - **중요**: Position이 아니라 **Local Position**을 확인해야 함
     - Inspector에서 "Position"이라고 표시되지만, 자식 오브젝트는 자동으로 Local Position임

5. **스케일 조정**
   - 같은 Inspector 창의 **Transform** 컴포넌트에서:
     - **Scale**의 X: **0.9**, Y: **0.9**, Z: **1** 입력
     - 이렇게 하면 블록들 사이에 여백이 생겨서 테트리스처럼 보입니다
     - Scale을 (1, 1, 1)로 하면 블록들이 딱 달라붙어서 보기 어렵습니다

**3단계: 나머지 큐브 추가 (Block_1, Block_2, Block_3)**

1. **Block_0 복사**
   - Hierarchy에서 **"Block_0"** 클릭
   - **Ctrl + D** (Windows) 또는 **Cmd + D** (Mac)로 복사
   - 또는 **우클릭** → **"Duplicate"** 선택
   - "Block_0 (1)"이 생성됨

2. **Block_1 설정**
   - 생성된 "Block_0 (1)"을 **"Block_1"**로 이름 변경
   - Hierarchy에서 **"Block_1"** 클릭
   - Inspector 창에서:
     - **Position**의 X: **1**, Y: **0**, Z: **0** 입력
     - **Scale** 확인: X: **0.9**, Y: **0.9**, Z: **1** (복사했으므로 이미 설정되어 있음)

3. **Block_2 생성 및 설정**
   - **Block_1** 선택 후 **Ctrl + D** (또는 **Cmd + D**)로 복사
   - 이름을 **"Block_2"**로 변경
   - Inspector에서:
     - **Position**의 X: **2**, Y: **0**, Z: **0** 입력
     - **Scale** 확인: (0.9, 0.9, 1)

4. **Block_3 생성 및 설정**
   - **Block_2** 선택 후 **Ctrl + D** (또는 **Cmd + D**)로 복사
   - 이름을 **"Block_3"**로 변경
   - Inspector에서:
     - **Position**의 X: **3**, Y: **0**, Z: **0** 입력
     - **Scale** 확인: (0.9, 0.9, 1)

**4단계: 프리팹으로 저장**

1. **Scene 뷰에서 확인**
   - Scene 뷰(왼쪽 상단)에서 4개의 큐브가 일렬로 배치된 모습 확인
   - I 모양이 보이면 성공!

2. **프리팹 폴더로 드래그**
   - Hierarchy에서 **"I_Tetromino"** 클릭
   - **I_Tetromino를 클릭하고 잡은 상태**로
   - Project 창의 **"Prefabs"** 폴더로 **드래그**
   - Prefabs 폴더에 파란색 아이콘으로 저장됨

3. **프리팹 확인**
   - Project 창의 Prefabs 폴더에 **"I_Tetromino"**가 파란색 아이콘으로 표시됨
   - 파란색 아이콘 = 프리팹
   - Hierarchy의 I_Tetromino는 프리팹 인스턴스가 됨

**💡 팁**: 
- 모든 블록의 Scale을 동일하게 (0.9, 0.9, 1)로 설정하면 블록들 사이에 약간의 여백이 생깁니다
- Scale (1, 1, 1): 블록들이 딱 달라붙음 ❌
- Scale (0.9, 0.9, 1): 블록들 사이에 여백이 생김 ✅

#### 1-3. 나머지 모양들 만들기

I 모양과 동일한 방법으로 나머지 모양들을 만듭니다. 각 모양마다:

1. **빈 GameObject 생성** → 이름 변경
2. **자식 큐브 4개 추가** → 각각 이름 변경 (Block_0, Block_1, Block_2, Block_3)
3. **각 블록의 Local Position 설정** (아래 표 참고)
4. **각 블록의 Scale을 (0.9, 0.9, 1)로 설정**
5. **프리팹으로 저장** (Prefabs 폴더로 드래그)

**O 모양 (O_Tetromino)**:
- 빈 GameObject 생성 → 이름: "O_Tetromino"
- Block_0: Local Position (0, 0, 0), Scale (0.9, 0.9, 1)
- Block_1: Local Position (1, 0, 0), Scale (0.9, 0.9, 1)
- Block_2: Local Position (0, 1, 0), Scale (0.9, 0.9, 1)
- Block_3: Local Position (1, 1, 0), Scale (0.9, 0.9, 1)
- Prefabs 폴더로 드래그하여 저장

**T 모양 (T_Tetromino)**:
- 빈 GameObject 생성 → 이름: "T_Tetromino"
- Block_0: Local Position (0, 0, 0), Scale (0.9, 0.9, 1)
- Block_1: Local Position (1, 0, 0), Scale (0.9, 0.9, 1)
- Block_2: Local Position (2, 0, 0), Scale (0.9, 0.9, 1)
- Block_3: Local Position (1, 1, 0), Scale (0.9, 0.9, 1)
- Prefabs 폴더로 드래그하여 저장

**S 모양 (S_Tetromino)**:
- 빈 GameObject 생성 → 이름: "S_Tetromino"
- Block_0: Local Position (1, 0, 0), Scale (0.9, 0.9, 1)
- Block_1: Local Position (2, 0, 0), Scale (0.9, 0.9, 1)
- Block_2: Local Position (0, 1, 0), Scale (0.9, 0.9, 1)
- Block_3: Local Position (1, 1, 0), Scale (0.9, 0.9, 1)
- Prefabs 폴더로 드래그하여 저장

**Z 모양 (Z_Tetromino)**:
- 빈 GameObject 생성 → 이름: "Z_Tetromino"
- Block_0: Local Position (0, 0, 0), Scale (0.9, 0.9, 1)
- Block_1: Local Position (1, 0, 0), Scale (0.9, 0.9, 1)
- Block_2: Local Position (1, 1, 0), Scale (0.9, 0.9, 1)
- Block_3: Local Position (2, 1, 0), Scale (0.9, 0.9, 1)
- Prefabs 폴더로 드래그하여 저장

**J 모양 (J_Tetromino)**:
- 빈 GameObject 생성 → 이름: "J_Tetromino"
- Block_0: Local Position (0, 0, 0), Scale (0.9, 0.9, 1)
- Block_1: Local Position (0, 1, 0), Scale (0.9, 0.9, 1)
- Block_2: Local Position (1, 1, 0), Scale (0.9, 0.9, 1)
- Block_3: Local Position (2, 1, 0), Scale (0.9, 0.9, 1)
- Prefabs 폴더로 드래그하여 저장

**L 모양 (L_Tetromino)**:
- 빈 GameObject 생성 → 이름: "L_Tetromino"
- Block_0: Local Position (2, 0, 0), Scale (0.9, 0.9, 1)
- Block_1: Local Position (0, 1, 0), Scale (0.9, 0.9, 1)
- Block_2: Local Position (1, 1, 0), Scale (0.9, 0.9, 1)
- Block_3: Local Position (2, 1, 0), Scale (0.9, 0.9, 1)
- Prefabs 폴더로 드래그하여 저장

**💡 팁**: 
- 각 모양을 만들 때마다 Scene 뷰에서 모양이 제대로 보이는지 확인하세요
- 모든 블록의 Scale을 (0.9, 0.9, 1)로 설정하는 것을 잊지 마세요
- 프리팹으로 저장하면 나중에 재사용할 수 있습니다

**팁**: 
- 각 블록의 Local Position은 부모(Tetromino) 기준 상대 위치입니다.  
- 부모가 (5, 17)에 있으면, Local Position (1, 0)인 블록은 실제로 (6, 17)에 표시됩니다.
- **스케일 조정**: 모든 블록의 Scale을 (0.9, 0.9, 1)로 설정하면 블록들 사이에 여백이 생겨서 테트리스처럼 보입니다.
  - Scale (1, 1, 1): 블록들이 딱 달라붙음 ❌
  - Scale (0.9, 0.9, 1): 블록들 사이에 여백이 생김 ✅

### 2. Tetromino 클래스 기본 구조

#### 2-1. Tetromino 스크립트 파일 생성

1. **Project 창에서 Scripts 폴더 선택**
   - 화면 아래 Project 창에서 **"Scripts"** 폴더 클릭

2. **C# 스크립트 생성**
   - Scripts 폴더 선택 상태에서 **우클릭**
   - **"Create"** → **"C# Script"** 선택

3. **이름 변경**
   - 생성된 "NewBehaviourScript"를 **"Tetromino"**로 변경
   - 방법: 클릭 후 잠시 기다린 후 다시 클릭하거나 **F2** 키

4. **스크립트 파일 확인**
   - Project 창의 Scripts 폴더에 **"Tetromino.cs"** 파일이 생성됨

#### 2-2. 스크립트 코드 작성

1. **Tetromino.cs 파일 열기**
   - Project 창에서 **"Tetromino.cs"** 더블클릭
   - 에디터가 열림

2. **코드 작성**
   - 에디터에 기본 코드가 있음
   - 다음 코드로 **전체 교체**:

```csharp
using UnityEngine;

public class Tetromino : MonoBehaviour
{
    // 게임 보드 참조
    private GameBoard gameBoard;
    
    void Start()
    {
        // GameBoard 찾기
        gameBoard = FindObjectOfType<GameBoard>();
        
        // 초기 위치 설정 (보드 중앙 상단)
        if (gameBoard != null)
        {
            // Spawner 위치에 따라 달라질 수 있지만, 여기서는 (5, 17)로 가정
            transform.position = new Vector3(5, 17, 0);
        }
    }
}
```

**중요**: 이 방식에서는:
- ❌ Dictionary 사용 안 함
- ❌ List 사용 안 함
- ✅ 자식 오브젝트(Block_0, Block_1 등)를 직접 사용
- ✅ Unity의 Transform 시스템 활용

### 3. Tetromino 스크립트를 프리팹에 추가 (선택사항)

프리팹에 스크립트를 추가하면 나중에 사용할 수 있습니다:

1. **프리팹 선택**
   - Project 창의 Prefabs 폴더에서 **"I_Tetromino"** 클릭
   - Inspector 창에 프리팹 정보가 표시됨

2. **스크립트 추가**
   - Inspector 창에서 **"Add Component"** 버튼 클릭
   - 검색창에 **"Tetromino"** 입력
   - **"Tetromino"** 클릭하여 추가

3. **다른 프리팹에도 추가**
   - O_Tetromino, T_Tetromino 등 다른 프리팹에도 동일하게 추가 가능
   - 하지만 현재는 선택사항입니다 (나중에 필요할 때 추가해도 됨)

### 4. 자식 블록 접근하기

나중에 이동/회전할 때 자식 블록들을 사용합니다:

```csharp
// 자식 블록 개수 확인
int childCount = transform.childCount;

// 첫 번째 자식 블록 가져오기
Transform firstBlock = transform.GetChild(0);

// 모든 자식 블록 순회
for (int i = 0; i < transform.childCount; i++)
{
    Transform block = transform.GetChild(i);
    // 블록 위치: block.position 또는 block.localPosition
}
```

**참고**: 
- `transform.position`: Unity 월드 좌표 (절대 위치)
- `transform.localPosition`: 부모 기준 상대 위치
- 자식 블록들은 `localPosition`으로 배치되어 있으므로, 부모를 이동하면 자식도 함께 이동합니다

## 💡 이 방식의 장점

**참고 블로그 방식 (프리팹 기반)**:
- ✅ **간단함**: Dictionary, List 같은 고급 자료구조 불필요
- ✅ **시각적**: Unity 에디터에서 직접 블록 모양을 만들고 확인 가능
- ✅ **이해하기 쉬움**: 2차원 배열만 알면 됨
- ✅ **직관적**: 프리팹을 만들면 바로 사용 가능

**다른 방식 (코드 기반)**:
- ❌ Dictionary, List 같은 자료구조 필요
- ❌ 코드로만 모양을 정의해야 함
- ❌ 초보자에게 어려움

## 📍 좌표 설명

**Local Position (상대 좌표)**:
- 각 Block의 Local Position은 부모(Tetromino) 기준 상대 위치
- 예: Block_0의 Local Position이 (0, 0)이면, 부모 위치에서 오프셋 없음
- 예: Block_1의 Local Position이 (1, 0)이면, 부모에서 오른쪽으로 1칸

**World Position (절대 좌표)**:
- 부모의 `transform.position`이 (5, 17)이고
- 자식의 Local Position이 (1, 0)이면
- 자식의 World Position은 (6, 17)입니다

**초기 생성 위치**:
- Spawner의 위치에 따라 달라질 수 있음
- 보통 (5, 17) 또는 (4, 19) 정도
- Unity 씬에서 Spawner GameObject의 Position을 설정

## ✅ 확인 사항

- [ ] Tetromino 클래스가 정상적으로 작동하는가?
- [ ] 블록이 화면에 표시되는가?
- [ ] 7가지 모양을 모두 정의할 수 있는가?

## 📚 참고 자료

- [시스템 설계 개요](../참고자료/시스템설계개요.md)
- [개념 설명 - 리스트와 딕셔너리](../참고자료/개념설명.md)

---

[← 이전 단계: 2단계 - 게임 보드 만들기](./2단계-게임-보드-만들기.md) | [다음 단계: 4단계 - 블록 이동 구현 →](./4단계-블록-이동-구현.md)
