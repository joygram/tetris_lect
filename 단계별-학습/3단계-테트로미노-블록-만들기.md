---
layout: default
title: 3단계 - 테트로미노 블록 만들기
---

# 3단계: 테트로미노 블록 만들기

## 🎯 이 단계에서 배울 것

- Unity에서 프리팹 만들기
- 7가지 테트로미노 프리팹 제작
- Tetromino 클래스 기본 구조
- 자식 오브젝트 사용하기

## 📝 실습 내용

### 1. Unity에서 테트로미노 프리팹 만들기

**참고 블로그 방식**: 각 테트로미노를 Unity 에디터에서 직접 프리팹으로 만듭니다.  
코드에서 Dictionary나 List 같은 복잡한 자료구조를 사용하지 않고, Unity의 시각적 편집 기능을 활용합니다.

#### I 모양 프리팹 만들기

1. **빈 GameObject 생성**
   - Hierarchy에서 우클릭 → Create Empty
   - 이름을 "I_Tetromino"로 변경

2. **자식 큐브 추가**
   - I_Tetromino 선택
   - Hierarchy에서 우클릭 → 3D Object → Cube
   - 이름을 "Block_0"으로 변경
   - Transform의 Position을 (0, 0, 0)으로 설정
   - **중요**: Local Position을 사용합니다 (부모 기준 상대 위치)

3. **나머지 큐브 추가**
   - Block_0을 복사 (Ctrl+D 또는 우클릭 → Duplicate)
   - 이름을 "Block_1"로 변경
   - Local Position을 (1, 0, 0)으로 설정
   - Block_2: Local Position (2, 0, 0)
   - Block_3: Local Position (3, 0, 0)

4. **프리팹으로 저장**
   - `Assets/Prefabs` 폴더 생성 (없으면)
   - I_Tetromino를 `Assets/Prefabs` 폴더로 드래그
   - 프리팹으로 저장됨

#### 나머지 모양들 만들기

**O 모양 (O_Tetromino)**:
- Block_0: Local Position (0, 0, 0)
- Block_1: Local Position (1, 0, 0)
- Block_2: Local Position (0, 1, 0)
- Block_3: Local Position (1, 1, 0)

**T 모양 (T_Tetromino)**:
- Block_0: Local Position (0, 0, 0)
- Block_1: Local Position (1, 0, 0)
- Block_2: Local Position (2, 0, 0)
- Block_3: Local Position (1, 1, 0)

**S 모양 (S_Tetromino)**:
- Block_0: Local Position (1, 0, 0)
- Block_1: Local Position (2, 0, 0)
- Block_2: Local Position (0, 1, 0)
- Block_3: Local Position (1, 1, 0)

**Z 모양 (Z_Tetromino)**:
- Block_0: Local Position (0, 0, 0)
- Block_1: Local Position (1, 0, 0)
- Block_2: Local Position (1, 1, 0)
- Block_3: Local Position (2, 1, 0)

**J 모양 (J_Tetromino)**:
- Block_0: Local Position (0, 0, 0)
- Block_1: Local Position (0, 1, 0)
- Block_2: Local Position (1, 1, 0)
- Block_3: Local Position (2, 1, 0)

**L 모양 (L_Tetromino)**:
- Block_0: Local Position (2, 0, 0)
- Block_1: Local Position (0, 1, 0)
- Block_2: Local Position (1, 1, 0)
- Block_3: Local Position (2, 1, 0)

**팁**: 각 블록의 Local Position은 부모(Tetromino) 기준 상대 위치입니다.  
부모가 (5, 17)에 있으면, Local Position (1, 0)인 블록은 실제로 (6, 17)에 표시됩니다.

### 2. Tetromino 클래스 기본 구조

`Assets/Scripts/Tetromino.cs` 생성:

```csharp
using UnityEngine;

public class Tetromino : MonoBehaviour
{
    // 게임 보드 참조
    private GameBoard gameBoard;
    
    void Start()
    {
        // GameBoard 찾기
        gameBoard = FindObjectOfType<GameBoard>();
        
        // 초기 위치 설정 (보드 중앙 상단)
        if (gameBoard != null)
        {
            // Spawner 위치에 따라 달라질 수 있지만, 여기서는 (5, 17)로 가정
            transform.position = new Vector3(5, 17, 0);
        }
    }
}
```

**중요**: 이 방식에서는:
- ❌ Dictionary 사용 안 함
- ❌ List 사용 안 함
- ✅ 자식 오브젝트(Block_0, Block_1 등)를 직접 사용
- ✅ Unity의 Transform 시스템 활용

### 3. 자식 블록 접근하기

나중에 이동/회전할 때 자식 블록들을 사용합니다:

```csharp
// 자식 블록 개수 확인
int childCount = transform.childCount;

// 첫 번째 자식 블록 가져오기
Transform firstBlock = transform.GetChild(0);

// 모든 자식 블록 순회
for (int i = 0; i < transform.childCount; i++)
{
    Transform block = transform.GetChild(i);
    // 블록 위치: block.position 또는 block.localPosition
}
```

**참고**: 
- `transform.position`: Unity 월드 좌표 (절대 위치)
- `transform.localPosition`: 부모 기준 상대 위치
- 자식 블록들은 `localPosition`으로 배치되어 있으므로, 부모를 이동하면 자식도 함께 이동합니다

## 💡 이 방식의 장점

**참고 블로그 방식 (프리팹 기반)**:
- ✅ **간단함**: Dictionary, List 같은 고급 자료구조 불필요
- ✅ **시각적**: Unity 에디터에서 직접 블록 모양을 만들고 확인 가능
- ✅ **이해하기 쉬움**: 2차원 배열만 알면 됨
- ✅ **직관적**: 프리팹을 만들면 바로 사용 가능

**다른 방식 (코드 기반)**:
- ❌ Dictionary, List 같은 자료구조 필요
- ❌ 코드로만 모양을 정의해야 함
- ❌ 초보자에게 어려움

## 📍 좌표 설명

**Local Position (상대 좌표)**:
- 각 Block의 Local Position은 부모(Tetromino) 기준 상대 위치
- 예: Block_0의 Local Position이 (0, 0)이면, 부모 위치에서 오프셋 없음
- 예: Block_1의 Local Position이 (1, 0)이면, 부모에서 오른쪽으로 1칸

**World Position (절대 좌표)**:
- 부모의 `transform.position`이 (5, 17)이고
- 자식의 Local Position이 (1, 0)이면
- 자식의 World Position은 (6, 17)입니다

**초기 생성 위치**:
- Spawner의 위치에 따라 달라질 수 있음
- 보통 (5, 17) 또는 (4, 19) 정도
- Unity 씬에서 Spawner GameObject의 Position을 설정

## ✅ 확인 사항

- [ ] Tetromino 클래스가 정상적으로 작동하는가?
- [ ] 블록이 화면에 표시되는가?
- [ ] 7가지 모양을 모두 정의할 수 있는가?

## 📚 참고 자료

- [시스템 설계 개요](../참고자료/시스템설계개요.md)
- [개념 설명 - 리스트와 딕셔너리](../참고자료/개념설명.md)

---

[← 이전 단계: 2단계 - 게임 보드 만들기](./2단계-게임-보드-만들기.md) | [다음 단계: 4단계 - 블록 이동 구현 →](./4단계-블록-이동-구현.md)
