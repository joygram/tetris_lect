---
layout: default
title: 7단계 - 점수 및 레벨 시스템
---

# 7단계: 점수 및 레벨 시스템

## 🎯 이 단계에서 배울 것

- 점수 계산 로직
- 레벨 시스템 구현
- UI 연동
- 낙하 속도 조정

---

## 🔷 구분하기: 내가 만드는 것 vs 엔진(API)이 주는 것

| 구분                    | 이번 단계 예시                                                               | 설명                                                                                                                                |
| ----------------------- | ---------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------- |
| **내가 만드는 것**      | **GameController** 클래스, **score/level**, **AddScore()**, **UpdateUI()**   | 우리가 정의하는 "몇 줄 지우면 몇 점", "레벨이 오르면 낙하 속도 어떻게 바꿀지". **점수·레벨 규칙**은 전부 우리 로직.                 |
| **엔진(API)이 주는 것** | **FindObjectOfType**, **Canvas/Text(UI)**, **MonoBehaviour**, **.text** 속성 | Unity가 제공. **화면에 글자 띄우기**는 엔진(UI 시스템)이 담당. 우리는 "**무슨 값(score, level)**을 **어디(Text)**에 넣을지"만 정함. |

**왜 엔진 것을 쓰나?**  
UI(Canvas, Text)는 **엔진이 그리기** 때문에, 우리는 **Text 컴포넌트의 .text** 에 문자열만 넣어 주면 됩니다. **FindObjectOfType**으로 GameController를 찾고, **AddScore**를 부르는 **연결**은 우리가 만들고, 실제 "점수 숫자 올리기"와 "화면에 반영"은 우리 로직 + 엔진 UI를 같이 씁니다.

---

## 📝 실습 내용

**📌 작업 씬 제차 확인 (매 단계 필수)**  
이번 단계 실습을 시작하기 전에 **다시 한 번** 확인하세요. **상단 씬 탭**에서 지금 열린 씬이 **Tetris** (게임용)인지 봅니다. **Tetris가 아니면** (SimpleScene, SampleScene, Untitled 등) **반드시 Tetris로 이름을 변경**한 뒤 진행하세요. → 1단계 **[씬 이름 변경 방법](./1단계-Unity-기초.md#scene-rename-guide)**

### 0. UI가 이미 만들어져 있다면?

4단계나 6단계에서 Canvas와 기본 Text를 미리 만들었다면:
- Canvas는 그대로 사용
- ScoreText, LinesText가 있다면 이름만 확인
- LevelText만 추가하면 됨

**처음부터 만드는 경우**: 아래 1번부터 따라하세요.

### 1. UI 만들기 (Canvas와 Text)

게임 화면에 점수, 줄 수, 레벨을 표시하기 위해 UI를 만들어야 합니다.

#### 1-1. Canvas 생성

1. **Hierarchy 창 확인**
   - 화면 왼쪽 하단의 **"Hierarchy"** 창 확인
   - 현재 씬의 오브젝트들이 보임

2. **Canvas 생성**
   - Hierarchy 창의 **빈 공간**에서 **우클릭**
   - 나타난 메뉴에서 **"UI"** → **"Canvas"** 선택
   - 또는 메뉴 바에서 **"GameObject"** → **"UI"** → **"Canvas"** 클릭

3. **자동 생성 확인**
   - Unity가 자동으로 다음을 생성합니다:
     - **Canvas**: 모든 UI의 부모 오브젝트 (파란색으로 선택됨)
     - **EventSystem**: UI 이벤트 처리 (자동 생성, 건드리지 않음)

4. **Canvas 확인**
   - Hierarchy에서 **"Canvas"** 클릭 (파란색으로 선택됨)
   - Inspector 창(오른쪽) 확인
   - **"Canvas"** 컴포넌트에서 **Render Mode**가 **"Screen Space - Overlay"**인지 확인
   - 기본값이므로 변경하지 않아도 됨

#### 1-2. 점수 표시 Text 생성

1. **Canvas 선택**
   - Hierarchy에서 **"Canvas"** 클릭 (파란색으로 선택됨)
   - **중요**: Canvas가 선택된 상태여야 자식으로 생성됨!

2. **Text 생성**
   - **Canvas가 선택된 상태**에서 Hierarchy 창의 빈 공간에서 **우클릭**
   - 메뉴에서 **"UI"** → **"Text - TextMeshPro"** 선택
     - 또는 **"UI"** → **"Legacy"** → **"Text"** 선택 (간단한 버전)
   - **팁**: TextMeshPro가 더 예쁘지만, Legacy Text도 충분히 사용 가능

3. **TextMeshPro Import (처음 사용 시)**
   - TextMeshPro를 처음 사용하면 Import 창이 나타남
   - **"Import TMP Essentials"** 버튼 클릭
   - 잠시 기다리면 자동으로 Import 완료
   - 창이 닫히면 계속 진행

4. **이름 변경**
   - Hierarchy에서 생성된 "Text (TMP)" 또는 "Text"를 **"ScoreText"**로 변경
   - 방법:
     - Hierarchy에서 클릭 후 잠시 기다린 후 다시 클릭
     - 또는 **F2** 키
     - 또는 Inspector 창 상단의 이름 필드에서 직접 입력

5. **텍스트 내용 설정**
   - Hierarchy에서 **"ScoreText"** 클릭
   - Inspector 창에서:
     - **Text (TextMeshPro)** 또는 **Text (Legacy)** 컴포넌트 찾기
     - **Text** 필드에 **"Score: 0"** 입력
     - **Font Size** 필드에 **24** 입력
     - **Color** 필드 클릭 → Color Picker에서 **흰색** 선택
       - 또는 Color 필드 옆의 색상 칸을 클릭하여 선택

6. **위치 조정 (Rect Transform)**
   - 같은 Inspector 창의 **Rect Transform** 컴포넌트에서:
     - **Pos X**: **400** 입력 (오른쪽으로 이동)
     - **Pos Y**: **200** 입력 (위로 이동)
     - **Width**: **200** 입력 (텍스트 영역 너비)
     - **Height**: **50** 입력 (텍스트 영역 높이)

7. **Game 뷰에서 확인**
   - Scene 뷰 옆의 **"Game"** 탭 클릭
   - 화면 오른쪽 상단에 "Score: 0" 텍스트가 보이면 성공!

#### 1-3. 줄 수 표시 Text 생성

1. **Canvas 선택**
   - Hierarchy에서 **"Canvas"** 클릭

2. **LinesText 생성**
   - **Canvas가 선택된 상태**에서 Hierarchy 창에서 **우클릭**
   - **"UI"** → **"Text - TextMeshPro"** 또는 **"UI"** → **"Legacy"** → **"Text"** 선택

3. **이름 변경**
   - 생성된 Text를 **"LinesText"**로 변경

4. **설정**
   - Hierarchy에서 **"LinesText"** 클릭
   - Inspector에서:
     - **Text** 필드에 **"Lines: 0"** 입력
     - **Font Size**: **24** 입력
     - **Color**: **흰색** 선택
   - **Rect Transform**:
     - **Pos X**: **400** 입력 (ScoreText와 같은 X 위치)
     - **Pos Y**: **150** 입력 (ScoreText 아래, Y 값이 작을수록 아래)
     - **Width**: **200** 입력
     - **Height**: **50** 입력

5. **Game 뷰에서 확인**
   - Game 뷰에서 ScoreText 아래에 "Lines: 0"이 보이면 성공!

#### 1-4. 레벨 표시 Text 생성

1. **Canvas 선택**
   - Hierarchy에서 **"Canvas"** 클릭

2. **LevelText 생성**
   - **Canvas가 선택된 상태**에서 Hierarchy 창에서 **우클릭**
   - **"UI"** → **"Text - TextMeshPro"** 또는 **"UI"** → **"Legacy"** → **"Text"** 선택

3. **이름 변경**
   - 생성된 Text를 **"LevelText"**로 변경

4. **설정**
   - Hierarchy에서 **"LevelText"** 클릭
   - Inspector에서:
     - **Text** 필드에 **"Level: 1"** 입력
     - **Font Size**: **24** 입력
     - **Color**: **흰색** 선택
   - **Rect Transform**:
     - **Pos X**: **400** 입력
     - **Pos Y**: **100** 입력 (LinesText 아래)
     - **Width**: **200** 입력
     - **Height**: **50** 입력

5. **Game 뷰에서 확인**
   - Game 뷰에서 세 개의 텍스트가 세로로 정렬되어 보이면 성공!
   - 위에서 아래로: ScoreText, LinesText, LevelText

**💡 팁**: 
- TextMeshPro를 사용하면 더 예쁜 텍스트를 만들 수 있지만, Legacy Text도 충분히 사용 가능합니다
- 위치는 게임 화면 크기에 맞게 조정할 수 있습니다
- Pos Y 값이 작을수록 아래에 배치됩니다

### 2. GameController 클래스 생성

`Assets/Scripts/GameController.cs` 생성:

```csharp
using UnityEngine;
using UnityEngine.UI;

public class GameController : MonoBehaviour
{
    public int score = 0;
    public int lines = 0;
    public int level = 1;
    
    public Text scoreText;
    public Text linesText;
    public Text levelText;
    
    void Start()
    {
        UpdateUI();
    }
    
    public void AddScore(int linesCleared)
    {
        int points = 0;
        switch (linesCleared)
        {
            case 1: points = 100; break;
            case 2: points = 300; break;
            case 3: points = 500; break;
            case 4: points = 800; break;
        }
        
        score += points * level;
        lines += linesCleared;
        
        // 10줄마다 레벨 증가
        level = (lines / 10) + 1;
        
        UpdateUI();
    }
    
    void UpdateUI()
    {
        if (scoreText) scoreText.text = $"점수: {score}";
        if (linesText) linesText.text = $"줄: {lines}";
        if (levelText) levelText.text = $"레벨: {level}";
    }
}
```

### 3. GameController와 UI 연결하기

GameController 스크립트를 GameObject에 추가하고 UI Text를 연결해야 합니다.

#### 3-1. GameController 스크립트 파일 생성

1. **Project 창에서 Scripts 폴더 선택**
   - 화면 아래 Project 창에서 **"Scripts"** 폴더 클릭

2. **C# 스크립트 생성**
   - Scripts 폴더 선택 상태에서 **우클릭**
   - **"Create"** → **"C# Script"** 선택

3. **이름 변경**
   - 생성된 "NewBehaviourScript"를 **"GameController"**로 변경
   - 방법: 클릭 후 잠시 기다린 후 다시 클릭하거나 **F2** 키

4. **스크립트 파일 확인**
   - Project 창의 Scripts 폴더에 **"GameController.cs"** 파일이 생성됨

5. **스크립트 코드 작성**
   - Project 창에서 **"GameController.cs"** 더블클릭
   - 에디터가 열리면 위의 코드로 **전체 교체**
   - **Ctrl + S** (Windows) 또는 **Cmd + S** (Mac)로 저장

#### 3-2. GameController GameObject 생성

1. **빈 GameObject 생성**
   - Hierarchy 창의 빈 공간에서 **우클릭**
   - **"Create Empty"** 선택
   - 또는 메뉴: **GameObject > Create Empty**

2. **이름 변경**
   - 생성된 "GameObject"를 **"GameController"**로 변경
   - 방법:
     - Hierarchy에서 클릭 후 잠시 기다린 후 다시 클릭
     - 또는 **F2** 키
     - 또는 Inspector 창 상단의 이름 필드에서 직접 입력

3. **GameController 스크립트 추가**
   - Hierarchy에서 **"GameController"** 클릭
   - Inspector 창에서 **"Add Component"** 버튼 클릭
   - 검색창에 **"GameController"** 입력
   - **"Game Controller"** 클릭하여 추가
   - 또는 Project 창에서 **"GameController.cs"**를 드래그하여 GameController GameObject에 드롭

#### 3-3. UI Text 연결

1. **GameController 선택**
   - Hierarchy에서 **"GameController"** 클릭
   - Inspector 창에 GameController 컴포넌트가 보임

2. **ScoreText 연결**
   - Inspector의 GameController 컴포넌트에서 **"Score Text"** 필드 확인
   - Hierarchy에서 **"ScoreText"** 찾기
   - **ScoreText를 클릭하고 잡은 상태**로
   - Inspector의 **"Score Text"** 필드로 **드래그**
   - 필드에 "ScoreText (Text)" 또는 "ScoreText (TextMeshPro)"가 표시되면 성공!

**또는 원형 버튼 방법**:
   - Inspector의 "Score Text" 필드 옆에 있는 **원형 버튼** 클릭
   - 나타난 창에서 **"ScoreText"** 선택
   - **"Select"** 버튼 클릭

3. **LinesText 연결**
   - Inspector의 **"Lines Text"** 필드에
   - Hierarchy의 **"LinesText"**를 **드래그 앤 드롭**
   - 또는 원형 버튼 클릭하여 선택

4. **LevelText 연결**
   - Inspector의 **"Level Text"** 필드에
   - Hierarchy의 **"LevelText"**를 **드래그 앤 드롭**
   - 또는 원형 버튼 클릭하여 선택

5. **연결 확인**
   - Inspector의 GameController 컴포넌트에서:
     - **Score Text**: ScoreText (Text) 또는 ScoreText (TextMeshPro) 표시
     - **Lines Text**: LinesText (Text) 또는 LinesText (TextMeshPro) 표시
     - **Level Text**: LevelText (Text) 또는 LevelText (TextMeshPro) 표시
   - 세 개 모두 연결되어 있으면 성공!
   - **중요**: 연결되지 않으면 UI에 점수가 표시되지 않습니다!

**💡 중요**: 
- Inspector에서 Text를 연결하지 않으면 UI에 점수가 표시되지 않습니다
- 드래그 앤 드롭으로 쉽게 연결할 수 있습니다

### 4. TetrisBlock의 LockPiece에서 연결

6단계에서 만든 `LockPiece()` 함수에서 이미 GameController를 연결했습니다:

```csharp
// TetrisBlock.cs의 LockPiece() 함수에서
GameController gameController = FindObjectOfType<GameController>();
if (gameController != null)
{
    gameController.AddScore(linesCleared);
}
```

### 5. 레벨에 따른 낙하 속도 조정

레벨이 올라갈수록 블록이 빨리 떨어지도록 합니다:

`TetrisBlock.cs`의 `Update()` 함수 수정:

```csharp
void Update()
{
    // GameController에서 현재 레벨 가져오기
    GameController gameController = FindObjectOfType<GameController>();
    if (gameController != null)
    {
        // 레벨이 높을수록 낙하 속도 빠름
        float currentFallSpeed = fallSpeed / gameController.level;
        fallTimer += Time.deltaTime;
        if (fallTimer >= currentFallSpeed)
        {
            MoveDown();
            fallTimer = 0f;
        }
    }
    else
    {
        // GameController가 없으면 기본 속도 사용
        fallTimer += Time.deltaTime;
        if (fallTimer >= fallSpeed)
        {
            MoveDown();
            fallTimer = 0f;
        }
    }
}
```

## 🔗 이전 단계와의 연결

이 단계에서는:
- **6단계의 `LockPiece()`**: 행 제거 개수를 GameController에 전달
- **GameController**: 점수 계산 및 UI 업데이트
- **TetrisBlock**: 레벨에 따른 낙하 속도 조정

## 💡 이번 단계에서 익히는 개념

- **클래스** = **멤버(저장소)** 와 **메소드(그걸 다루는 함수)** 를 한 덩어리로 묶은 것.  
  예: GameController 클래스 = `score`, `level` (멤버) + `AddScore()`, `UpdateUI()` (메소드).  
  관련된 저장소와 그걸 다루는 함수를 한 곳에 두면 코드가 읽기 쉬워집니다.

**📌 복기**: **변수**(score, level) = 멤버, **메소드**(AddScore, UpdateUI) = 그걸 다루는 함수. 한 번에 이해 못했어도 [변수](../참고자료/개념/변수.md) · [멤버와 메소드](../참고자료/개념/멤버와메소드.md)에서 다시 실습해 보세요.

## 📖 기초 개념 학습 (복기 → 점진적 실습)

**📌 복기**로 위 개념을 떠올린 뒤, 아래 **기초 개념** 문서에서 **점진적으로 확장된 실습**을 진행하세요. 단계가 올라갈수록 같은 개념이 조금씩 확장되므로, 차근차근 따라 하면 됩니다.

| 개념 문서                                         | 이번 단계와의 연결                                                 |
| ------------------------------------------------- | ------------------------------------------------------------------ |
| [멤버와 메소드](../참고자료/개념/멤버와메소드.md) | GameController = score·level(멤버) + AddScore(메소드). 한눈에 정리 |
| [클래스](../참고자료/개념/클래스.md)              | Player 클래스. name·score + AddScore 실습                          |
| [상태 관리](../참고자료/개념/상태관리.md)         | score, level 변수로 상태 추적. 점수·레벨 실습                      |
| [이벤트](../참고자료/개념/이벤트.md)              | "행 제거 시" 점수 추가 같은 반응. 100점 달성 시 메시지 실습        |

## ✅ 확인 사항

- [ ] Canvas가 생성되었는가?
- [ ] ScoreText, LinesText, LevelText가 모두 생성되었는가?
- [ ] GameController에 UI Text가 연결되었는가?
- [ ] 점수가 올바르게 계산되는가?
- [ ] 레벨이 증가하는가?
- [ ] UI에 점수가 표시되는가?
- [ ] 레벨이 올라갈수록 블록이 빨리 떨어지는가?

## 📖 기초 개념 학습으로 이어가기

위 표의 **기초 개념 학습**을 진행한 뒤, UI 표시·배치가 궁금하면 [스코어 UI 표시 가이드](../참고자료/스코어-UI-표시-가이드.md), [UI 배치 구조 설계](../참고자료/UI배치구조설계.md)에서 점진적으로 이어가세요.

**✅ 다음 단계 전 점검**: 작업 씬이 **Tetris**인지 **재차 확인**하세요. Tetris가 아니면 [씬 이름 변경 방법](./1단계-Unity-기초.md#scene-rename-guide)을 따라 Tetris로 바꾼 뒤 다음 단계로 넘어가세요.

---

[← 이전 단계: 6단계 - 행 제거 시스템](./6단계-행-제거-시스템.md) | [다음 단계: 8단계 - 게임 완성 →](./8단계-게임-완성.md)
